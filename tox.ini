[tox]
envlist = py38

[testenv]
whitelist_externals =
  python
deps =
  pytest
  pillow
  numpy
commands =
  pytest {posargs}

[testenv:gh-workflows]
basepython = {env:TOXPYTHON:python3.8}
deps =
    pytest
    pillow
    numpy
    coverage
    -r{toxinidir}/requirements.txt
setenv =
    PYTHONPATH={toxinidir}
commands =
    coverage run --source={toxinidir} -m unittest discover -p '*_test.py' -s 'src'
    coverage html -d htmlcov
    coverage report --fail-under=90